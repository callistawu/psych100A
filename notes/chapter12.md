# Chapter 12: What You Have Learned

## 12.0 What You Have Learned About Exploring Variation
Make  plot to help explore the variation in `avg_hatecrimes_per_100k_fbi`.
````
gf_histogram(~avg_hatecrimes_per_100k_fbi, data=hate_crimes)
````

Arrange the data frame to show you places with the highest hate crime rates.
````
head(arrange(hate_crimes, desc(avg_hatecrimes_per_100k_fbi)))
````

There may be reasons to exclude DC from our analysis, depending on what we know.
* if we want to exclude it, we would use the `filter()` function

### Why do some places have higher rates of hate crimes (per 100,000 people) than others?
* make a visualization of hate crimes explained by unemployment
````
gf_point(avg_hatecrimes_per_100k_fbi ~ share_unemp_seas, data=hate_crimes, color="navy", size=3) %>%
gf_lm(color="orange")
````

* make a visualization of hate crimes explained by household crime
````
gf_point(avg_hatecrimes-per_100k_fbi ~ median_house_inc, data = hate_crimes, color = "darkgreen", size=3) %>%
gf_lm(color="orange")
````

* to **explain** means that knowing a score on one variable helps you make a better guess as to that same unit's score on another

## 12.1 What You Have Learned About Modeling Variation
### Representing Models
Hate Crimes = Unemployment + other stuff
* Y<sub>i</sub> = b<sub>0</sub> + b<sub>1</sub>X<sub>1</sub> + e<sub>i</sub>
* hatecrimes<sub>i</sub> = b<sub>0</sub> +   b<sub>1</sub>unemployment<sub>i</sub> + e<sub>i</sub>
  
Hate Crimes = Household Income + other stuff
* Y<sub>i</sub> = b<sub>0</sub> + b<sub>1</sub>X<sub>1</sub> + e<sub>i</sub>
* hatecrimes<sub>i</sub> = b<sub>0</sub> +   b<sub>1</sub>income<sub>i</sub> + e<sub>i</sub>

Find and print the best-fitting estimates for the unemployment model.
````
lm(avg_hatecrimes_per_100k_fbi ~ share_unemp_seas, data=hate_crimes)
````
* GLM notation: Y<sub>i</sub> = 1.77 + 11.99X<sub>i</sub> + e<sub>i</sub>

Find and print the best-fitting estimates for the income model.
````
lm(avg_hatecrimes_per_100k_fbi ~ median_house_inc, data=hate_crimes)
````
* GLM notation: Y<sub>i</sub> = -.09564 + 0.00006X<sub>i</sub> + e<sub>i</sub>

Fit the models.
````
unemp.model <- lm(avg_hatecrimes_per_100k_fbi ~ share_unemp_seas, data=hate_crimes)
income.model <- lm(avg_hatecrimes_per_100k_fbi ~ median_house_inc, data=hate_crimes)
supernova(unemp.model)
supernova(income.model)
````

What would make you think that the income model explains more variation in hate crimes than the unemployment model?
* PRE for the income model is greater than for the unemployment model
* SS Model for the income model is greater than for the unemployment model
* SS Error is greater for the unemployment model than for the income model

Why is the SS Total the same value (143.99) for the two models?
* both are based on residuals from the mean of the same outcome variable

Which of the following is the correct interpretation of PRE (0.10) in the supernova table for the income model above?
* 10% of the SS from the empty model can be explained by variation in income

What does the F value for the income model (5.41) mean?
* 5.41 times the error is reduced by the additional parameter (b<sub>1</sub>) in the income model compared to any other parameter that could have been added to the model.

The income model explains more variation in hate crimes than does the unemployment model.

## 12.2 What You Have Learned About Evaluating Models
Is there really a relationship between income and hate crimes in the Data Generating Process? Or was the relationship just caused by random chance?

What column tells us the likelihood that our sample PRE (or sample F) was generated by the empty model?
* p

### Use randomization to generate sampling distribution of PREs.
* save the sample PRE
````
samplePRE <- PRE(avg_hatecrimes_per_100k_fbi ~ medain_house_inc, data=hate_crimes)
````
* create a sampling distribution of randomized PREs
````
SDoPRE <- do(10) * PRE(avg_hatecrimes_per_100k_fbi ~ shuffle(median_house_inc), data=hate_crimes)
````
* depict the sampling distribution in a histogram
````
gf_histogram(~PRE, data=SDoPRE, fill= ~PRE < samplePRE)
````
* run a tally
````
tally(~PRE > samplePRE, data=SDoPRE, format="proportion")
````

### Use randomization to generate sampling distribution of F ratios.
* save the sample F
````
sampleF <- fVal(avg_hatecrimes_per_100k_fbi ~ median_house_inc, data=hate_crimes)
````
* create sampling distribution of randomized Fs
````
SDoF <- do(10) * fVal(avg_hatecrimes_per_100k_fbi ~ shuffle(median_house_inc), data=hate_crimes)
````
* depict the sampling distribution in a histogram
````
gf_histogram(~fVal, data = SDoF, fill = ~fVal < sampleF)
````

* run a tally
````
tally(~fVal > sampleF, data=SDoF, format="proportion")
````

Do the results of your analysis above mean that it is impossible for the empty model to be true?
* no, it shows that the empty model is unlikely to be the DGP that generated our sample, but unlikely does not mean impossible

Does this mean that income causes hate crimes in states?
* no, the design of this study was correlational, so although there is a relationship, we don't know if it's causal

Does this mean that people who have high incomes are also more likely to commit hate crimes?
* no, the observatioons were states. states that have high median incomes also have more hate crimes. we don't know anything about individual people through this study
